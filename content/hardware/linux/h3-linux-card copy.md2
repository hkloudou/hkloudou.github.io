---
title: "h3 Linux Card"
date: 2021-11-28T12:35:37+08:00
draft: true
tags: ["linux","h3"]
---


## 项目背景

去年在家上网课期间，在 b 站关注了一位技术 up 主——稚晖君。他进行了一个自制超迷你 Linux 卡片电脑软硬件开源项目，名为「量子计划」。关于该计划的相关设计在 b 站的播放量超过百万，许多人都被他设计的精致小板子震撼。目前该计划的 PCB 设计、系统镜像和相关代码都已开源：

{{< github name="peng-zhihui / Project-Quantum" link="https://github.com/peng-zhihui/Project-Quantum" description="超迷你模块化卡片电脑计划" color="#555555" language="C" >}}

当然，从理论上讲，既然已经开源了项目，所有的东西都能够自己做出来。但实际上，因为量子计划的核心板 Quark-N 采用了 6 层高密度沉金 PCB 工艺制造，集成了完整的片上 ARM-Linux 系统（包含 CPU、DDR、eMMC），一般的工厂不会生产这样高难度的板子，所以成本十分高。并且，就算生产出来了，那些电容、电阻等贴片元件还要我自己焊接，我的技术远远达不到要求。所以，通过开源的文件自己进行制作，是不可能的。

不过还是有厂家站出来进行了量产。Seeed Studio 矽递公司拿到了授权，在 2020 年底开始进行预约量产。我有幸成为早期预约的人，在 2021 年初拿到了第一批产品。矽递在其官方 Wiki[^1] 上已经更新了使用教程，我按照教程简单体验了一下板子的功能。事先声明一下，我只是个开发板领域的小白，因此对于产品的评价十分粗浅，该开发板的很多功能我都没有测试过，只是「初步体验」。

![quark-0.jpg](/images/quark-0.jpg "Quark 量产型正面")

![quark-1.jpg](/images/quark-1.jpg "Quark 量产型背面")

## 初步体验

### 产品亮点

矽递生产的套件由 Atom-N 和 Quark-N 组成，也就是说，这款量产型产品不仅仅有 Quark-N 核心板件，还有 Atom-N 功能扩展板。Quark-N 可以利用金手指 M.2 接口固定在 Atom-N 上。其实在作者开源仓库里还有一些基于该核心板的其他拓展组件，矽递并没有生产出来，可能是因为这些组件需求量不大，生产成本很高。

![quark-2.png](/images/quark-2.png "核心板与扩展板的组合")

包装盒里还有一小包散热片和一个小铜柱。散热片有四片，但实际上只需要给 CPU 和它旁边的组件贴上散热片即可。这里需要注意，一定要贴散热片。因为 CPU 使用的是全志 H3，发热严重。矽递将来可能会生产相应的散热模块，如果有主动散热的风扇模块，我想我应该会买一个。铜柱也是很关键的一个零件，可以将它焊接在电路板上的一个多出来的焊盘上，作为散热模块或者外盒螺丝固定的地方。

![quark-3.jpg](/images/quark-3.jpg "散热片、铜管、包装盒")

这个板子的体积是普通树莓派大小的 1/4（40mm × 35mm），虽然板子很小，但配置了麦克风，陀螺仪，加速度计，显示屏、功能按键，在 Quark-N 核心板上集成了 16GB 的 eMMC。可以将系统放进 eMMC，这样不需要插入 SD 卡也能够访问系统。此外，板子上依然有 16 个空焊盘，可以看作是拓展接口。

### 简单操作

根据官网的指导下载系统，使用 Type-C 接口给板子供电，然后就是初始化开发板的一系列操作。因为板子上带有显示屏，开机后自动进入终端，所以可以直接插入了键盘输入命令。显示屏也可进入图形界面，只需要输入命令：

```
$ sudo startx
```

但是进入图形界面后会有一个问题，因为显示屏太小了，桌面无法显示完整。所以最好的方法还是借助于 PC 的显示屏。这就需要使用 SSH 进行连接了。

![quark-4.jpg](/images/quark-4.jpg "在自带的显示屏上显示终端")

打开手机热点，让 PC 和 Quark 都连接到手机热点，即在同一网络下。在 Quark 上，使用 Network Manager 来管理网络，按照以下步骤连接 WiFi：

1. **切换到 root 用户**:
   
   ```
   $ su root
   ```

2. **开启 WiFi**：
   
    ```
    $ nmcli r wifi on
    ```

3. **扫描附近的 WiFi**:

    ```
    $ nmcli dev wifi
    ```

4. **连接到特定的 WiFi**:

    ```
    $ nmcli dev wifi connect "SSID" password "PASSWORD" ifname wlan0
    ```

    将 `SSID` 和 `PASSWORD` 改成 WiFi 的账号和密码，连接一次以后，下次默认连接该 WiFi。

{{< notice notice-note>}}
注意账号和密码前后有双引号，且引号前后要加空格。这里我第一次输入的时候忘记加空格，出现了报错。
{{< /notice >}}

连接上网络后，我在 PC 上使用远程桌面连接试图访问系统桌面的时候，却发现怎么都连不上，系统 SSH 功能开启了，不知道什么问题。所以我决定先利用串口通信，用 Type-C 的线直接将板子和 PC 连接，也就是用 PC 给板子供电和传输数据。我使用的是 Xshell，连接的名称可以随便写，但协议要选择 `SERIAL`。通过串口通信可以轻松访问系统。

{{< notice notice-note >}}
这里还要注意一点，早批次的 Atom-N 插入 Type-C 接口的两个方向功能是不一样的，一面是串口通信时需要的 USB Serial，旋转 180 度后插入则为 USB OTG，之后批次的取消了 USB OTG 的功能，两面都为 USB 串口。
{{< /notice >}}

在进行串口通信后，我再次使用远程桌面连接，填写 IP 地址、用户名、密码[^2]，就成功访问到了系统桌面。在这一步骤中，可以通过手机热点设置中查看连接设备的 IP 地址。系统的用户名为 `pi`，密码为 `quark`。

在以上都设定好后，就可以愉快地体验这一个迷你卡片电脑了。

## 一些小问题

由于这块板子是稚晖君个人设计的，因此某些地方还会存在一定的问题，以下是我认为值得改进的地方：
1. 散热问题。目前我认为这是最严重的问题。由于采用了 H3 CPU，发热很严重。如果没有散热措施，开机后在很短的时间温度就能飙升到很高，我没有测量具体的温度，但从感觉上来讲，很烫手。

2. 元件不牢固。我使用的时候很小心，没有出现掉件的现象。但在技术交流群里，有人的电路板上的元件焊接不牢固。那么小的一块贴片电容电阻，如果电路板上的焊盘也掉了，自己重新焊接十分麻烦。

3. eMMC 的问题。这是我第一次接触到 eMMC 的概念，还没有深入研究，不过在技术交流群里很多大佬已经直接将系统装在 eMMC 中。有人发现自己核心板上的 eMMC 只有 8GB，但正常情况下应该是 16GB；并且大多数人的 eMMC 来自台湾，少部分人的 eMMC 是大陆产的。购买的元件生产厂不统一。

4. 缺少网线和 HDMI 接口。在 Quark 板子的初代设计中，是有这些接口的，但目前的设计为了小型化取消了这些组件，我觉得是一个遗憾。

5. 系统优化。Quark 的系统属于 Ubuntu 系统，进行了一些修改。目前的系统还有很多不完善的地方，比如我点击某些图标会报错。

## 总结

总的来说，这块板子还是很不错的。300 块钱的价格，比自己根据设计文件进行定制要便宜很多。购入 Quark 的目的不是说为了追求板子的性能有多好，而是为了体验在这么小的板子上能实现这么多功能，感受新鲜事物带来的一种新奇与震撼。

![quark-5.jpg](/images/quark-5.jpg "一个键盘、一个鼠标，一块 Quark，组成了最小的计算机")

[^1]: 官方 Wiki：<https://wiki.seeedstudio.com/cn/Quantum-Mini-Linux-Development-Kit/>