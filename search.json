[{"categories":["software"],"content":"broker 内容\n","description":"","tags":["broker","soft"],"title":"empty","uri":"/software/encrypt/empty/"},{"categories":["software"],"content":"broker 内容\n","description":"","tags":["broker","soft"],"title":"empty","uri":"/software/microservice/empty/"},{"categories":["software"],"content":"设备分析 通过设备分析我们得知，固件升级到最新7.9.1的设备只支持SMB/CIFS 1.0协议以及AFP苹果自己研发的协议，所以做出以下操作。\n配置密码访问   在mac或ios 打开Airport Utility软件，输入密码后进入设备 在菜单的Disks【磁盘里】，把Secure Shared Disks【密码分享方式】修改为With Accounts【适用账号密码】，然后在下面的框里加入密码   Tip:\n挂载命令 1 2  mkdir -p /mnt/share mount.cifs //服务器/路径「保持和账号相同」 /mnt/share --verbose -o username=账号,pass=密码,sec=ntlm,vers=1.0,dir_mode=0755,file_mode=0644,noperm   参数解析   -o 的配置信息是能够连接的精髓 sec 安全模式需要手动指定为ntlm vers 需要手动设置为1.0 dir_mode 设置目录权限 file_mode 设置文件权限【这两部分应该都懂吧】 noperm 跳过权限验证   在k3s/k8s的应用  由于笔者酷爱k3s，只提供k3s的示例。项目网址：https://github.com/fstab/cifs\n 安装cifs插件到每台设备\n1 2 3 4 5 6  VOLUME_PLUGIN_DIR=\"/usr/libexec/kubernetes/kubelet-plugins/volume/exec\" mkdir -p \"$VOLUME_PLUGIN_DIR/fstab~cifs\" cd \"$VOLUME_PLUGIN_DIR/fstab~cifs\" curl -L -O https://raw.githubusercontent.com/fstab/cifs/master/cifs chmod 755 cifs $VOLUME_PLUGIN_DIR/fstab~cifs/cifs init   配置secret文件\n1  kubectl create secret generic cifs-secret --type fstab/cifs --from-literal=username=账号 --from-literal=password=密码 -n pods所在命名空间   测试Pod\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27  apiVersion:v1kind:Podmetadata:name:busyboxnamespace:defaultspec:containers:- name:busyboximage:busyboxcommand:- sleep- \"3600\"imagePullPolicy:IfNotPresentvolumeMounts:- name:testmountPath:/datasubPath:test_pathvolumes:- name:testflexVolume:driver:\"fstab/cifs\"fsType:\"cifs\"secretRef:name:\"cifs-secret\"options:networkPath:\"//server/share\"mountOptions:\"dir_mode=0755,file_mode=0644,noperm\"  这里推荐参考笔者的用helm 安装gogs的项目，并实现通过Time Machine 自动备份。项目网址：https://github.com/hkloudou/helm-charts/tree/main/charts/gogs\n使用方法：\n1 2  helm repo add hkloudou https://hkloudou.github.io/helm-charts/ helm install gogs --namespace gogs -f ./gogs.yaml hkloudou/gogs   ","description":"","tags":["time capsule","Apple","Linux"],"title":"Linux 挂载 Apple time capsule 实录","uri":"/software/notebook/linux-mount-time-capsule/"},{"categories":["software"],"content":"broker ","description":"","tags":["broker","soft"],"title":"Mqtt Broker","uri":"/software/communicate/mqtt-broker/"},{"categories":["hardware"],"content":"项目背景 ","description":"","tags":["linux","h3"],"title":"h3 Linux Card","uri":"/hardware/linux/h3-linux-card/"}]
